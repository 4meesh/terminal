<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ameesh Mohammed PV â€” Terminal Portfolio</title>
<style>
  body {background:#000;font-family:monospace;margin:0;padding:0;text-align:center;color:#00ff99;overflow:hidden;}
  .falling-text {
    font-size:3rem;
    margin-top:20%;
  }
  .falling-text span {
    display:inline-block;
    opacity:0;
    animation: fall 1s forwards;
  }
  @keyframes fall {
    0% {transform:translateY(-150px);opacity:0;}
    70% {opacity:1;}
    100% {transform:translateY(0);opacity:1;}
  }
  .terminal-wrap {display:none;background:#0d0d0d;color:#00ff99;padding:20px;height:100vh;}
  .terminal {max-width:900px;margin:0 auto;text-align:left;border:2px solid #00ff99;padding:20px;border-radius:8px;}
  .command {color:#00ff99}
  .output {color:#fff;margin-bottom:10px;white-space:pre-line}
  input.cmd {background:transparent;border:none;color:#00ff99;outline:none;width:100%;font-family:monospace;font-size:14px}

  /* cursor */
  .input-wrap {padding-left:2px}
  .cursor {position:absolute;top:2px;left:4px;width:10px;height:18px;background:#00ff99;opacity:1;animation: blink 1s steps(2,start) infinite}
  @keyframes blink{50%{opacity:0}}
  .input-wrap input:focus + .cursor {display:block}
  .input-wrap input:placeholder-shown + .cursor {display:block}
</style>
</head>
<body>
<div class="start-page" id="startPage">
  <div class="falling-text" id="fallingText"></div>
</div>
<div class="terminal-wrap" id="terminalWrap">
  <div class="terminal" id="terminal">
    <div class="output">Welcome to Ameesh Mohammed PV's Terminal Portfolio (type 'help' to begin)</div>
    <div class="input-row" id="mainInputRow">
      <span class="command">$ </span>
      <div class="input-wrap" style="display:inline-block;position:relative;max-width:80%;">
        <span id="mirror" aria-hidden style="visibility:hidden;position:absolute;left:0;top:0;white-space:pre;font-family:monospace;font-size:14px;padding:0;margin:0;color:transparent"></span>
        <input type="text" id="commandInput" class="cmd" autofocus autocomplete="off" spellcheck="false">
        <span id="cursor" class="cursor" aria-hidden></span>
      </div>
    </div>
  </div>
</div>
</div>
<script>
  const name = "Ameesh Mohammed PV";
  const fallingText = document.getElementById('fallingText');
  name.split('').forEach((char, i) => {
    const span = document.createElement('span');
    span.textContent = char;
    span.style.animationDelay = `${i * 0.1}s`;
    fallingText.appendChild(span);
  });

  setTimeout(() => {
    document.getElementById('startPage').style.display = 'none';
    document.getElementById('terminalWrap').style.display = 'block';
    document.getElementById('commandInput').focus();
  }, name.length * 100 + 1000);

  const terminal = document.getElementById('terminal');
  const input = document.getElementById('commandInput');
  const mirror = document.getElementById('mirror');
  const cursor = document.getElementById('cursor');

  // attach input handlers to any input to manage cursor positioning
  function attachInputHandlers(el){
    function updateMirror(){
      mirror.textContent = el.value || '';
      // measure width and move cursor
      const width = mirror.offsetWidth;
      cursor.style.left = (width + 6) + 'px';
    }
    el.addEventListener('input', updateMirror);
    el.addEventListener('focus', ()=>{cursor.style.display='block'; updateMirror();});
    el.addEventListener('blur', ()=>{cursor.style.display='none';});
    // initialize
    updateMirror();
  }

  attachInputHandlers(input);

  input.addEventListener('keydown',function(e){
    if(e.key==='Enter'){
      const cmd=input.value.trim();
      if(cmd==='clear'){
        terminal.innerHTML='<div class="output">Terminal cleared. Go home? (y/n)</div>';
        const choiceInput=document.createElement('input');
        choiceInput.className='cmd';
        terminal.appendChild(choiceInput);
        choiceInput.focus();
        choiceInput.addEventListener('keydown',function(ev){
          if(ev.key==='Enter'){
            if(choiceInput.value.toLowerCase()==='y'){
              terminalWrap.style.display='none';
              document.getElementById('startPage').style.display='block';
            }else{
              terminal.innerHTML='<div class="output">Stayed on current session</div><div><span class="command">$ </span><input type="text" id="commandInput" class="cmd"></div>';
            }
          }
        });
        input.value='';
        return;
      }
      const out=commands[cmd]||`Command not found: ${cmd}`;
      const newLine=document.createElement('div');
      newLine.innerHTML=`<span class='command'>$ ${cmd}</span><div class='output'>${out}</div>`;
      terminal.insertBefore(newLine,input.parentElement);
      input.value='';
    }
  });
</script>
</body>
</html>
